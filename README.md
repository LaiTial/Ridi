## RIDI

이 프로젝트는 전자책으로 유명한 리디북스의 백엔드 서버를 클론코딩하는 프로젝트다
`Spring Boot`와 `MySQL`을 사용하여 구축되었으며, 책 조회, 키워드 검색, 별점 및 리뷰 등록 등의 기능을 제공.

## 기간/인원

- 2025.03 ~ 2025.07 / 1인

## 사용 기술
| 구분               | 기술                   | 버전 / 설명                           |
| ---------------- | -------------------- | --------------------------------- |
| **언어 & 프레임워크**   | Java, Spring Boot    | JDK 20, Spring Boot 3.4.4         |
| **데이터베이스 & ORM** | MySQL, JPA           | MySQL 8.0, JPA 3.4.4              |
| **캐시/세션**        | Redis                | Redis 7.4.2                       |
| **보안 & 인증**      | Spring Security, JWT | Spring Security 3.4.4, JWT 0.12.3 |
| **검색/쿼리 최적화**    | QueryDSL             | 5.0.0                             |
| **인프라**          | Docker        | MySQL/Redis 컨테이너, Vault v1.19.0   |

## 기능 정리
- 회원 관리: 가입, 로그인/로그아웃, 이메일 인증, 약관 관리
- 책/작가/출판사 관리: CRUD, 출간 상태 관리
- 카테고리 & 키워드: 계층 구조, 키워드 매핑, 검색
- 커뮤니티: 댓글/대댓글, 별점 등록 및 평균 계산
- 인증/보안: JWT 기반 인증, Redis 토큰 관리
- 운영: MSA 구조, 별점 자동 업데이트 배치

## 경험
- MSA 멀티 모듈 구조를 적용, 서비스 간 의존성을 최소화하고 확장성을 고려한 설계를 경험.
- Spring Security + JWT 기반 로그인 기능을 구현할 때 비정상적 요청 및 토큰 관리 문제를 실무적으로 경험. Redis를 활용해 사용자별 토큰을 저장하고, 재발급과 무분별한 요청을 제한하여 보안을 강화.
    - Redis를 활용하여 사용자별 발급 토큰과 인증 메일 정보를 인메모리로 캐싱, 재발급 및 무분별한 요청 제한을 통해 로그인 성능과 보안 강화.
    - Vault를 통해 민감 정보를 YAML 파일에 저장하지 않고 안전하게 관리, 애플리케이션 보안을 강화.
- QueryDSL 기반 키워드 검색 기능 개발 시 1:N, M:1 관계를 가진 카테고리-책 키워드 연동 문제를 해결. 불필요한 데이터 저장을 최소화하고, 필요한 데이터만 효율적으로 조회하도록 설계하여 성능과 단순함을 동시에 확보.
- Spring Batch를 활용한 자동 배치 처리 경험. 별점 데이터 등 대용량 데이터를 처리할 때, 전체 데이터를 한 번에 메모리로 로드하면 병목이 발생하는 문제를 경험. 이후 patch size 단위로 데이터를 나누어 처리하는 페이징 처리를 통해 대용량 데이터 처리 안정성과 성능 최적화를 달성. 이 과정을 통해 Spring Batch 설계와 최적화에 대한 이해도를 심화.
- Spring Boot와 JPA를 사용하여 RESTful API를 설계하고 API를 문서화
- Docker를 사용해 MySQL과 Vault, Redis를 사용해 환경 일관성을 확보하고, 서비스 간 의존성을 최소화하며 쉽게 배포 및 확장 가능하도록 설계.

## 성과
- Locust로 서버 부하 테스트를 진행
  - 500명의 트래픽을 시뮬레이션 → 동시 접속 인원 수가 250명을 넘길 시 서버 부하가 심화
  - 요청 처리 시간이 약 17초 등 과도하게 길어지고, RPS 85 → 20-30으로 감소

- 성능 튜닝:
- (book, keyword)를 묶은 복합 인덱스 지정
- Grouby+Having절 -> Not Exist 절을 사용해 DB 쿼리 튜닝

- 결과 : 
- 평균 응답 시간이 약 17초 → 0.03초, 약 500배 성능 향상
  

## ERD
![ERD.png](images%2FERD.png)

## DB 설계
https://www.notion.so/DB-25251952602a8064b4e1edfa19afe005
## API 문서
https://www.notion.so/API-1a351952602a80639404fa3efeb5327f

## locust을 활용한 부하테스트 진행
![locust_graph.png](images%2Flocust_graph.png)
![locust.png](images%2Flocust.png)
- locust를 활용한 부하테스트 진행
- 부하테스트 및 성능 분석 : https://blog.naver.com/alcoding_/223981949810
- DB 쿼리 성능 튜닝 및 최적화 : https://blog.naver.com/alcoding_/223982005006
  /search/keywords/로 random으로 지정한 키워드에 해당하는 책을 불러오는 요청을 하는 API를 트래픽을 500명으로 테스트 => DB 쿼리 튜닝을 통해 17초에서 0.32초라는 500배 성능 향상이라는 결과를 얻음